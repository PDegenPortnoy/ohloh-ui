:ruby
  content_for(:html_title) { t('projects.html_title', name: @project.name, title: t('.page_title')) }
  page_context[:select_top_menu_nav] = 'select_projects'
  page_context[:select_footer_nav] = :project_security

%div
  %h2.pull-left= t('.title')
  = project_analysis_timestamp(@project)

.clear

.row
  .col-md-1
    &nbsp;
  .col-md-10
    - if @vulnerabilites
      %table.table.table-striped
        %thead
          %tr#dingus-row
            %td{colspan: 5} &nbsp;
          %tr
            %th.col-md-1= t('.cve_id')
            %th.col-md-1= t('.severity')
            %th.col-md-1= t('.date_published')
            %th.col-md-3= t('.description')
            %th.col-md-3= t('.versions_affected')
        %tbody
          - @vulnerabilites.each do |vulnerability|
            %tr.nvd_link{'data-nvd-link' => "#{ENV['NVD_LINK'] + vulnerability.cve_id}"}
              %td= vulnerability.cve_id
              %td= vulnerability.severity.titleize
              %td= vulnerability.published_on.to_s(:mdy)
              %td.vul_description
                - if vulnerability.description
                  %span#read_less
                    = vulnerability.description[0..Vulnerability::DESC_LENGTH]
                    = link_to t('.more'), 'javascript:void(0)' if vulnerability.description.length > Vulnerability::DESC_LENGTH
                  %span#read_more{ style: 'display: none;' }
                    = vulnerability.description
                    = link_to t('.less'), 'javascript:void(0)'
              %td
                .versions_affected= vulnerability.recent_releases
      .text-center
        = will_paginate @vulnerabilites
    - else
      .no_vulnerability= t('.no_vulnerability')

  .col-md-1
    &nbsp;
